<script>"use strict";$(function(){function r(e){$.ajax("/api/sessions/?items=*").then(function(t){return t}).then(function(t){var o={sessionId:t.id,customer:{customerId:null===(t=e.clientProfileData)||void 0===t?void 0:t.document},ticket:{storeId:localStorage.getItem("@propz/store-id"),ticketId:e.orderFormId,amount:0,date:(new Date).toISOString(),blockUpdate:0,items:[]}};e.totalizers.forEach(function(t,e){o.ticket.amount=o.ticket.amount+parseFloat(t.value/100)}),e.items.forEach(function(t,e){t={itemId:e,ean:t.ean,unitPrice:t.price/100,unitSize:t.measurementUnit,quantity:t.quantity,blockUpdate:0};o.ticket.items.push(t)});t="/api/io/put-price?orderFormId="+e.orderFormId;$.ajax({url:t,type:"PUT",contentType:"application/json",data:JSON.stringify(o)}).done(function(t){localStorage.setItem("@propz/post-price",JSON.stringify(t)),vtexjs.checkout.getOrderForm().then(function(t){localStorage.setItem("@propz/last-state-items",JSON.stringify(t.items)),localStorage.setItem("@propz/last-state-profile",JSON.stringify(t.clientProfileData))})}).fail(function(t){}).always(function(t){})})}localStorage.setItem("@propz/last-state-items",JSON.stringify(vtexjs.checkout.orderForm.items)),localStorage.setItem("@propz/last-state-profile",JSON.stringify(vtexjs.checkout.orderForm.clientProfileData)),r(vtexjs.checkout.orderForm),$(window).on("orderFormUpdated.vtex",function(t,o){var i=JSON.parse(localStorage.getItem("@propz/last-state-items")),e=JSON.parse(localStorage.getItem("@propz/last-state-profile"));o.items.forEach(function(t,e){i[e].sellingPrice==t.sellingPrice&&i[e].quantity==t.quantity||setTimeout(r(o),500)}),null!=o.clientProfileData&&(e=null==e||void 0===e.document?null:e.document,o.clientProfileData.document!=e&&r(o))})});</script>